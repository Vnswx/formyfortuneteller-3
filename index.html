<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="asset/css/index.css">
    <title>My Elaa</title>
    <style>
        .square {
            width: 80px;
            height: 80px;
            background: tomato;
        }
    </style>
</head>
<body>
    <div class="envelope-container">
        <img src="asset/img/atutup.png" id="envelopeClosed" class="envelope" style="width: 89%; left: 17px;"/>
        <img src="asset/img/abuka.png" id="envelopeOpen" class="envelope" style="opacity: 0;" />
      </div>
      
      <!-- <div class="square"></div> -->
      
      <!--  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script> -->
    <!-- <script type="module">
        import { animate } from 'js/anime.esm.min.js';
    </script> -->

    <script src="asset/js/anime.iife.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script>
  let idleAnim;

function startIdleAnimation() {
    idleAnim = anime({
        targets: envelopeClosed,
        rotate: [
            { value: -1, duration: 1500, easing: 'easeInOutSine' },
            { value: 1, duration: 1500, easing: 'easeInOutSine' }
        ],
        loop: true,
        direction: 'alternate'
    });
}

function createSparkles() {
    const container = document.querySelector('.envelope-container');
    for (let i = 0; i < 15; i++) {
        let sparkle = document.createElement('div');
        sparkle.classList.add('sparkle');
        container.appendChild(sparkle);

        sparkle.style.left = "50%";
        sparkle.style.top = "50%";

        anime({
            targets: sparkle,
            translateX: anime.random(-100, 100),
            translateY: anime.random(-100, 100),
            scale: [
                { value: 1, duration: 0 },
                { value: 0, duration: 1000, easing: 'easeOutQuad' }
            ],
            opacity: [
                { value: 1, duration: 200 },
                { value: 0, duration: 800 }
            ],
            duration: 1000,
            complete: () => sparkle.remove()
        });
    }
}

function createFloatingHeartsOrFlowers() {
    const container = document.querySelector('.envelope-container');
    const icons = ["‚ù§Ô∏è", "üå∏", "üíñ", "üíê"]; // variasi
    for (let i = 0; i < 8; i++) {
        let particle = document.createElement('div');
        particle.classList.add('floating-particle');
        particle.textContent = icons[Math.floor(Math.random() * icons.length)];
        container.appendChild(particle);

        particle.style.left = "50%";
        particle.style.top = "50%";
        particle.style.position = "absolute";
        particle.style.fontSize = anime.random(16, 28) + "px";

        anime({
            targets: particle,
            translateX: anime.random(-80, 80),
            translateY: anime.random(-150, -250),
            opacity: [
                { value: 1, duration: 300 },
                { value: 0, duration: 1500 }
            ],
            duration: 1800,
            easing: 'easeOutCubic',
            complete: () => particle.remove()
        });
    }
}

// Jalankan idle di awal
startIdleAnimation();

document.querySelector('.envelope-container').addEventListener('click', function() {
    idleAnim.pause();

    anime({
        targets: '#envelopeClosed',
        opacity: 0,
        duration: 500,
        easing: 'easeInOutQuad'
    });

    anime({
        targets: '#envelopeOpen',
        opacity: 1,
        duration: 500,
        easing: 'easeInOutQuad',
        complete: function() {
            createSparkles();
            createFloatingHeartsOrFlowers();

            setTimeout(() => {
                window.location.href = "index.html"; // ganti ke halaman tujuan
            }, 2000);
        }
    });
});

    // const { animate } = anime;
    // anime({
    //     targets: '.square',
    //     translateX: 250,
    //     rotateZ: 360,
    //     scale: 3,
    //     duration: 1000,
    //     loop: true
    // })
        
    </script>
</body>
</html>